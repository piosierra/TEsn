


rule all:
    input:
        "results/alldatamerged"



rule extract_data:
    input:
        sites = "resources/sites_files",
        samples = "resources/samples_files"

    output:
        directory("results/sites_explored")
    
    conda:
        "../env/pysam2.yaml"

    shell:
        "python workflow/scripts/cram_explorer.py {input.sites} {input.samples} {output}"

rule merge_data:
    input:
        "results/sites_explored"
    output:
        "results/alldatamerged"
    shell:
        "workflow/scripts/merge_data.sh {input} {output}"
